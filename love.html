<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine? ðŸ’–</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f1 25%, #ffd6e8 50%, #ffc9e0 75%, #ffb8d9 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background hearts */
        .heart-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            opacity: 0;
            animation: float-up 8s infinite ease-in;
        }

        @keyframes float-up {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            50% {
                transform: translateY(50vh) rotate(180deg) scale(1.2);
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(0.8);
                opacity: 0;
            }
        }

        .container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(25px);
            border-radius: 35px;
            padding: 4rem 3rem;
            box-shadow: 0 12px 48px rgba(255, 105, 180, 0.25),
                        0 0 100px rgba(255, 182, 193, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            max-width: 600px;
            width: 100%;
            animation: fadeInScale 1s ease-out;
            text-align: center;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .to-name {
            font-size: 1.5rem;
            color: #c44569;
            margin-bottom: 1rem;
            font-style: italic;
            animation: fadeIn 1.5s ease-out;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            font-weight: 700;
            line-height: 1.2;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .from-name {
            font-size: 1.75rem;
            color: #a93f55;
            margin-bottom: 3rem;
            font-weight: 600;
            animation: fadeIn 2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .buttons-container {
            display: flex;
            gap: 2rem;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .btn {
            padding: 1.5rem 3rem;
            border: none;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Crimson Text', serif;
            position: relative;
            overflow: hidden;
            min-width: 150px;
        }

        .btn-yes {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
            }
            50% {
                box-shadow: 0 6px 30px rgba(255, 107, 157, 0.6),
                            0 0 50px rgba(255, 107, 157, 0.3);
            }
        }

        .btn-yes:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 107, 157, 0.5);
        }

        .btn-no {
            background: rgba(255, 255, 255, 0.5);
            color: #8b2e4a;
            border: 2px solid rgba(255, 105, 180, 0.3);
            position: absolute;
            transition: all 0.15s ease;
        }

        .btn-no:hover {
            background: rgba(255, 255, 255, 0.7);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeInModal 0.3s ease-out;
        }

        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 3rem 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 107, 157, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.8);
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal-emoji {
            font-size: 5rem;
            margin-bottom: 1rem;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .modal-message {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #c44569;
            margin-bottom: 2rem;
            line-height: 1.4;
        }

        .modal-btn {
            padding: 1rem 2.5rem;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.25rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Crimson Text', serif;
        }

        .modal-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            z-index: 999;
            animation: confetti-fall 3s linear;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 640px) {
            h1 {
                font-size: 2.5rem;
            }
            .card {
                padding: 2.5rem 2rem;
            }
            .buttons-container {
                gap: 1rem;
            }
            .btn {
                padding: 1.25rem 2rem;
                font-size: 1.25rem;
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating hearts background -->
    <div class="heart-bg" id="heartBg"></div>

    <div class="container">
        <div class="card">
            <div class="to-name">Dear <span id="toName">Valentine</span>,</div>
            
            <h1>Will You Be My Valentine? ðŸ’–</h1>
            
            <div class="from-name">From: <span id="fromName">Someone Special</span></div>
            
            <div class="buttons-container">
                <button class="btn btn-yes" id="yesBtn">YES! ðŸ’•</button>
                <button class="btn btn-no" id="noBtn">No</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-emoji">ðŸ’•âœ¨</div>
            <div class="modal-message" id="modalMessage"></div>
            <button class="modal-btn" onclick="closeModal()">Close</button>
        </div>
    </div>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getFirestore, doc, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDGJvkEZPtaqSJfV4y7qCM2kngRf-spGuA",
            authDomain: "animevibe-e6051.firebaseapp.com",
            projectId: "animevibe-e6051",
            storageBucket: "animevibe-e6051.firebasestorage.app",
            messagingSenderId: "567058042005",
            appId: "1:567058042005:web:2045341ea9e5c4aa4edf9c",
            measurementId: "G-ZBCWELWQ99"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make saveToFirebase available globally
        window.saveToFirebase = async function(code, fromName, toName) {
            try {
                const docRef = doc(db, 'valentines', code);
                await setDoc(docRef, {
                    from: fromName,
                    to: toName,
                    response: 'yes',
                    timestamp: serverTimestamp()
                });
                console.log('Saved to Firebase successfully');
            } catch (error) {
                console.error('Error saving to Firebase:', error);
            }
        };
    </script>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        const fromName = urlParams.get('from') || 'Someone Special';
        const toName = urlParams.get('to') || 'Valentine';

        document.getElementById('fromName').textContent = fromName;
        document.getElementById('toName').textContent = toName;

        // Romantic messages - Upgraded Spicy Edition ðŸ”¥
        const romanticMessages = [
            "My heart races every time I think of you... and now you're mine! ðŸ”¥ðŸ’‹",
            "You've ignited a fire in my soul that only your love can fuel! âœ¨ðŸ”¥",
            "I'm addicted to your smile, your touch, your everything... Be mine forever! ðŸ’•ðŸŒ¹",
            "Every beat of my heart whispers your name... You're my obsession! ðŸ’“ðŸ”¥",
            "You're not just my Valentine, you're my entire universe colliding into one perfect moment! ðŸŒŒðŸ’«",
            "I crave your presence like the moon craves the night... You complete me! ðŸŒ™ðŸ’–",
            "Your YES just unlocked the paradise I've been dreaming of... Let's get lost in each other! ðŸ”ðŸ’‹",
            "I want to know every inch of your heart, every secret, every dream... You're intoxicating! ðŸ·ðŸ’•",
            "From this moment on, I'm yours completely... body, heart, and soul! ðŸ’ðŸ”¥",
            "You make my pulse quicken and my world spin... I'm falling deeper with every breath! ðŸ’«ðŸ’“"
        ];

        // Create floating hearts
        const heartBg = document.getElementById('heartBg');
        const heartSymbols = ['ðŸ’–', 'ðŸ’•', 'ðŸ’—', 'ðŸ’“', 'ðŸ’', 'ðŸ’˜', 'â¤ï¸', 'ðŸ’ž'];
        
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 8 + 's';
            heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
            heartBg.appendChild(heart);
            
            setTimeout(() => heart.remove(), 8000);
        }
        
        setInterval(createHeart, 500);
        for (let i = 0; i < 15; i++) {
            setTimeout(createHeart, i * 300);
        }

        // Confetti function
        function createConfetti() {
            const colors = ['#ff6b9d', '#c44569', '#ff9ff3', '#feca57', '#ff6348', '#ff4757', '#f368e0'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 20);
            }
        }

        // YES button
        document.getElementById('yesBtn').addEventListener('click', async function() {
            // Show modal immediately
            const randomMessage = romanticMessages[Math.floor(Math.random() * romanticMessages.length)];
            document.getElementById('modalMessage').textContent = randomMessage;
            document.getElementById('modal').style.display = 'flex';
            
            // Create confetti
            createConfetti();
            
            // Save to Firebase
            if (code) {
                await window.saveToFirebase(code, fromName, toName);
            }
        });

        // NO button - dodging logic
        const noBtn = document.getElementById('noBtn');
        const container = document.querySelector('.container');
        
        function moveNoButton() {
            const containerRect = container.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            
            // Calculate safe boundaries
            const maxX = containerRect.width - btnRect.width - 100;
            const maxY = containerRect.height - btnRect.height - 100;
            
            // Random position
            const newX = Math.random() * maxX;
            const newY = Math.random() * maxY;
            
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
        }

        noBtn.addEventListener('mouseenter', moveNoButton);
        noBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            moveNoButton();
        });

        // Close modal
        window.closeModal = function() {
            document.getElementById('modal').style.display = 'none';
        };
    </script>
</body>
</html>
